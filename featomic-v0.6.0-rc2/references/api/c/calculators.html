<!doctype html>
<html class="no-js" lang="en" data-content_root="../../../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../../genindex.html" /><link rel="search" title="Search" href="../../../search.html" /><link rel="next" title="Miscellaneous" href="misc.html" /><link rel="prev" title="Defining systems" href="systems.html" />

    <!-- Generated with Sphinx 7.2.6 and Furo 2024.08.06 -->
        <title>Dealing with calculators - Featomic 0.6.0-rc2 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../../../_static/featomic.css?v=191cc0c0" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery.css?v=d2d258e8" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery-binder.css?v=f4aeca0c" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery-dataframe.css?v=2082cf3c" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo-extensions.css?v=302659d7" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/fontawesome.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/solid.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/brands.min.css" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../index.html"><div class="brand">Featomic 0.6.0-rc2 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon no-toc" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../../index.html">
  
  
  <span class="sidebar-brand-text">Featomic 0.6.0-rc2 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../get-started/index.html">Getting started</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Getting started</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../get-started/featomic.html">What is featomic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../get-started/installation.html">Installation</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../get-started/tutorials.html">Tutorials: using featomic from Python</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Tutorials: using featomic from Python</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/first-calculation.html">First descriptor computation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../how-to/index.html">How-to guides</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of How-to guides</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../how-to/computing-soap.html">Computing SOAP features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../how-to/sample-selection.html">Sample Selection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../how-to/property-selection.html">Property Selection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../how-to/keys-selection.html">Keys selection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../how-to/splined-radial-integral.html">Splined radial integral</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../how-to/long-range.html">Long-range only LODE descriptor</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../../index.html">Reference guides</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Reference guides</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="../../calculators/index.html">Calculator reference</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Calculator reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../calculators/spherical-expansion.html">Spherical expansion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../calculators/spherical-expansion-by-pair.html">Spherical expansion by pair</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../calculators/lode-spherical-expansion.html">LODE spherical expansion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../calculators/soap-radial-spectrum.html">SOAP radial spectrum</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../calculators/soap-power-spectrum.html">SOAP power spectrum</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../calculators/atomic-composition.html">Atomic Composition</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../calculators/neighbor-list.html">Neighbor List</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../calculators/sorted-distances.html">Sorted distance vector</a></li>
</ul>
</li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="../index.html">API documentation</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of API documentation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3 has-children"><a class="reference internal" href="../python/index.html">Python</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of Python</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../python/systems.html">Available system implementation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../python/calculators.html">Available Calculators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../python/misc.html">Miscellaneous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../python/cutoff.html">Local environments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../python/density.html">Atomic density</a></li>
<li class="toctree-l4"><a class="reference internal" href="../python/basis.html">Basis functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../python/splines.html">Splined radial integrals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../python/clebsch-gordan.html">Clebsch-Gordan products</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../torch/index.html">TorchScript</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of TorchScript</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../torch/systems.html">System</a></li>
<li class="toctree-l4"><a class="reference internal" href="../torch/calculators.html">Calculators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../torch/clebsch-gordan.html">Clebsch-Gordan products</a></li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../torch/cxx/index.html">TorchScript C++ API reference</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of TorchScript C++ API reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../torch/cxx/calculators.html">Calculators</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../rust.html">Rust</a></li>
<li class="toctree-l3 current has-children"><a class="reference internal" href="index.html">C</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of C</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="systems.html">Defining systems</a></li>
<li class="toctree-l4 current current-page"><a class="current reference internal" href="#">Dealing with calculators</a></li>
<li class="toctree-l4"><a class="reference internal" href="misc.html">Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../cxx/index.html">C++</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of C++</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../cxx/systems.html">Defining systems</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cxx/calculators.html">Dealing with calculators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cxx/misc.html">Miscellaneous</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../explanations/index.html">Explanations</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of Explanations</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../explanations/concepts.html">Core concepts of featomic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../explanations/soap.html">What is SOAP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../explanations/rotation_adapted.html">Rotation-Adapted Features</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../devdoc/index.html">Developer documentation</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle navigation of Developer documentation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../devdoc/get-started.html">Getting started</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../devdoc/how-to/index.html">How-to guides</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle navigation of How-to guides</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../devdoc/how-to/new-calculator.html">Adding a new calculator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../devdoc/how-to/profiling.html">Profiling calculation</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../devdoc/explanations/index.html">Explanations</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle navigation of Explanations</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../devdoc/explanations/architecture.html">Code organization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../devdoc/explanations/interfaces.html">Python and C interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../devdoc/explanations/radial-integral.html">SOAP and LODE radial integrals</a></li>
</ul>
</li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../../../_sources/references/api/c/calculators.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon no-toc" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="dealing-with-calculators">
<h1>Dealing with calculators<a class="headerlink" href="#dealing-with-calculators" title="Link to this heading">¶</a></h1>
<dl class="c type">
<dt class="sig sig-object c" id="c.featomic_calculator_t">
<span class="target" id="featomic_8h_1addd7ac45274b6d5009c54cdebe7e8f3f"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.featomic_calculator_t" title="featomic_calculator_t"><span class="n"><span class="pre">featomic_calculator_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">featomic_calculator_t</span></span></span><a class="headerlink" href="#c.featomic_calculator_t" title="Link to this definition">¶</a><br /></dt>
<dd><p>Opaque type representing a <code class="docutils literal notranslate"><span class="pre">Calculator</span></code></p>
</dd></dl>

<p>The following functions operate on <a class="reference internal" href="#c.featomic_calculator_t" title="featomic_calculator_t"><code class="xref c c-type docutils literal notranslate"><span class="pre">featomic_calculator_t</span></code></a>:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#c.featomic_calculator" title="featomic_calculator"><code class="xref c c-func docutils literal notranslate"><span class="pre">featomic_calculator()</span></code></a>: create new calculators</p></li>
<li><p><a class="reference internal" href="#c.featomic_calculator_free" title="featomic_calculator_free"><code class="xref c c-func docutils literal notranslate"><span class="pre">featomic_calculator_free()</span></code></a>: free allocated calculators</p></li>
<li><p><a class="reference internal" href="#c.featomic_calculator_compute" title="featomic_calculator_compute"><code class="xref c c-func docutils literal notranslate"><span class="pre">featomic_calculator_compute()</span></code></a>: run the actual calculation</p></li>
<li><p><a class="reference internal" href="#c.featomic_calculator_name" title="featomic_calculator_name"><code class="xref c c-func docutils literal notranslate"><span class="pre">featomic_calculator_name()</span></code></a> get the name of a calculator</p></li>
<li><p><a class="reference internal" href="#c.featomic_calculator_parameters" title="featomic_calculator_parameters"><code class="xref c c-func docutils literal notranslate"><span class="pre">featomic_calculator_parameters()</span></code></a>: get the hyper-parameters of a calculator</p></li>
<li><p><a class="reference internal" href="#c.featomic_calculator_cutoffs" title="featomic_calculator_cutoffs"><code class="xref c c-func docutils literal notranslate"><span class="pre">featomic_calculator_cutoffs()</span></code></a>: get the cutoffs of a calculator</p></li>
</ul>
<hr class="docutils" />
<dl class="c function">
<dt class="sig sig-object c" id="c.featomic_calculator">
<span class="target" id="featomic_8h_1a36417fc65d0c6afd5d443bce7ebd29b5"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.featomic_calculator_t" title="featomic_calculator_t"><span class="n"><span class="pre">featomic_calculator_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">featomic_calculator</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">name</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">parameters</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.featomic_calculator" title="Link to this definition">¶</a><br /></dt>
<dd><p>Create a new calculator with the given <code class="docutils literal notranslate"><span class="pre">name</span></code> and <code class="docutils literal notranslate"><span class="pre">parameters</span></code>.</p>
<p>The list of available calculators and the corresponding parameters are in
the <a class="reference internal" href="../../index.html#userdoc-references"><span class="std std-ref">main documentation</span></a>. The <code class="docutils literal notranslate"><span class="pre">parameters</span></code> should
be formatted as JSON, according to the requested calculator schema.</p>
<p>All memory allocated by this function can be released using <code class="docutils literal notranslate"><span class="pre">featomic_calculator_free</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – name of the calculator as a NULL-terminated string </p></li>
<li><p><strong>parameters</strong> – hyper-parameters of the calculator, JSON-formatted in a NULL-terminated string</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A pointer to the newly allocated calculator, or a <code class="docutils literal notranslate"><span class="pre">NULL</span></code> pointer in case of error. In case of error, you can use <code class="docutils literal notranslate"><span class="pre">featomic_last_error()</span></code> to get the error message. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.featomic_calculator_free">
<span class="target" id="featomic_8h_1a7a43b21ed9b79ed586b00c5194697c97"></span><a class="reference internal" href="misc.html#c.featomic_status_t" title="featomic_status_t"><span class="n"><span class="pre">featomic_status_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">featomic_calculator_free</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.featomic_calculator_t" title="featomic_calculator_t"><span class="n"><span class="pre">featomic_calculator_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">calculator</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.featomic_calculator_free" title="Link to this definition">¶</a><br /></dt>
<dd><p>Free the memory associated with a <code class="docutils literal notranslate"><span class="pre">calculator</span></code> previously created with <code class="docutils literal notranslate"><span class="pre">featomic_calculator</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">calculator</span></code> is <code class="docutils literal notranslate"><span class="pre">NULL</span></code>, this function does nothing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>calculator</strong> – pointer to an existing calculator, or <code class="docutils literal notranslate"><span class="pre">NULL</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The status code of this operation. If the status is not <code class="docutils literal notranslate"><span class="pre">FEATOMIC_SUCCESS</span></code>, you can use <code class="docutils literal notranslate"><span class="pre">featomic_last_error()</span></code> to get the full error message. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.featomic_calculator_compute">
<span class="target" id="featomic_8h_1a01ac188a9e29dc35bbeb72315de04744"></span><a class="reference internal" href="misc.html#c.featomic_status_t" title="featomic_status_t"><span class="n"><span class="pre">featomic_status_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">featomic_calculator_compute</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.featomic_calculator_t" title="featomic_calculator_t"><span class="n"><span class="pre">featomic_calculator_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">calculator</span></span>, <a class="reference external" href="https://docs.metatensor.org/latest/core/reference/c/tensor.html#c.mts_tensormap_t" title="(in metatensor)"><span class="n"><span class="pre">mts_tensormap_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">descriptor</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="systems.html#c.featomic_system_t" title="featomic_system_t"><span class="n"><span class="pre">featomic_system_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">systems</span></span>, <span class="n"><span class="pre">uintptr_t</span></span><span class="w"> </span><span class="n"><span class="pre">systems_count</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.featomic_calculation_options_t" title="featomic_calculation_options_t"><span class="n"><span class="pre">featomic_calculation_options_t</span></span></a><span class="w"> </span><span class="n"><span class="pre">options</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.featomic_calculator_compute" title="Link to this definition">¶</a><br /></dt>
<dd><p>Compute the representation of the given list of <code class="docutils literal notranslate"><span class="pre">systems</span></code> with a <code class="docutils literal notranslate"><span class="pre">calculator</span></code></p>
<p>This function allocates a new <code class="docutils literal notranslate"><span class="pre">mts_tensormap_t</span></code> in <code class="docutils literal notranslate"><span class="pre">*descriptor</span></code>, which memory needs to be released by the user with <code class="docutils literal notranslate"><span class="pre">mts_tensormap_free</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>calculator</strong> – pointer to an existing calculator </p></li>
<li><p><strong>descriptor</strong> – pointer to an <code class="docutils literal notranslate"><span class="pre">mts_tensormap_t</span> <span class="pre">*</span></code> that will be allocated by this function </p></li>
<li><p><strong>systems</strong> – pointer to an array of systems implementation </p></li>
<li><p><strong>systems_count</strong> – number of systems in <code class="docutils literal notranslate"><span class="pre">systems</span></code></p></li>
<li><p><strong>options</strong> – options for this calculation</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The status code of this operation. If the status is not <code class="docutils literal notranslate"><span class="pre">FEATOMIC_SUCCESS</span></code>, you can use <code class="docutils literal notranslate"><span class="pre">featomic_last_error()</span></code> to get the full error message. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.featomic_calculator_name">
<span class="target" id="featomic_8h_1a0a2d43108489c328cb99bad58ffca1a6"></span><a class="reference internal" href="misc.html#c.featomic_status_t" title="featomic_status_t"><span class="n"><span class="pre">featomic_status_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">featomic_calculator_name</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.featomic_calculator_t" title="featomic_calculator_t"><span class="n"><span class="pre">featomic_calculator_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">calculator</span></span>, <span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">name</span></span>, <span class="n"><span class="pre">uintptr_t</span></span><span class="w"> </span><span class="n"><span class="pre">bufflen</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.featomic_calculator_name" title="Link to this definition">¶</a><br /></dt>
<dd><p>Get a copy of the name of this calculator in the <code class="docutils literal notranslate"><span class="pre">name</span></code> buffer of size <code class="docutils literal notranslate"><span class="pre">bufflen</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">name</span></code> will be NULL-terminated by this function. If the buffer is too small to fit the whole name, this function will return <code class="docutils literal notranslate"><span class="pre">FEATOMIC_BUFFER_SIZE_ERROR</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>calculator</strong> – pointer to an existing calculator </p></li>
<li><p><strong>name</strong> – string buffer to fill with the calculator name </p></li>
<li><p><strong>bufflen</strong> – number of characters available in the buffer</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The status code of this operation. If the status is not <code class="docutils literal notranslate"><span class="pre">FEATOMIC_SUCCESS</span></code>, you can use <code class="docutils literal notranslate"><span class="pre">featomic_last_error()</span></code> to get the full error message. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.featomic_calculator_parameters">
<span class="target" id="featomic_8h_1a04b074c14c65382b1fd2c2ad544617b1"></span><a class="reference internal" href="misc.html#c.featomic_status_t" title="featomic_status_t"><span class="n"><span class="pre">featomic_status_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">featomic_calculator_parameters</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.featomic_calculator_t" title="featomic_calculator_t"><span class="n"><span class="pre">featomic_calculator_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">calculator</span></span>, <span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">parameters</span></span>, <span class="n"><span class="pre">uintptr_t</span></span><span class="w"> </span><span class="n"><span class="pre">bufflen</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.featomic_calculator_parameters" title="Link to this definition">¶</a><br /></dt>
<dd><p>Get a copy of the parameters used to create this calculator in the <code class="docutils literal notranslate"><span class="pre">parameters</span></code> buffer of size <code class="docutils literal notranslate"><span class="pre">bufflen</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">parameters</span></code> will be NULL-terminated by this function. If the buffer is too small to fit the whole name, this function will return <code class="docutils literal notranslate"><span class="pre">FEATOMIC_BUFFER_SIZE_ERROR</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>calculator</strong> – pointer to an existing calculator </p></li>
<li><p><strong>parameters</strong> – string buffer to fill with the parameters used to create this calculator </p></li>
<li><p><strong>bufflen</strong> – number of characters available in the buffer</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The status code of this operation. If the status is not <code class="docutils literal notranslate"><span class="pre">FEATOMIC_SUCCESS</span></code>, you can use <code class="docutils literal notranslate"><span class="pre">featomic_last_error()</span></code> to get the full error message. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.featomic_calculator_cutoffs">
<span class="target" id="featomic_8h_1ad8d47efc102ea726d0719f28db1e9bbc"></span><a class="reference internal" href="misc.html#c.featomic_status_t" title="featomic_status_t"><span class="n"><span class="pre">featomic_status_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">featomic_calculator_cutoffs</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.featomic_calculator_t" title="featomic_calculator_t"><span class="n"><span class="pre">featomic_calculator_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">calculator</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">double</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">cutoffs</span></span>, <span class="n"><span class="pre">uintptr_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">cutoffs_count</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.featomic_calculator_cutoffs" title="Link to this definition">¶</a><br /></dt>
<dd><p>Get all radial cutoffs used by this <code class="docutils literal notranslate"><span class="pre">calculator</span></code>’s neighbors lists (which can be an empty list).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">*cutoffs</span></code> pointer will be pointing to data inside the <code class="docutils literal notranslate"><span class="pre">calculator</span></code>, and is only valid when the <code class="docutils literal notranslate"><span class="pre">calculator</span></code> itself is.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>calculator</strong> – pointer to an existing calculator </p></li>
<li><p><strong>cutoffs</strong> – pointer to be filled with the address of the first element of an array of cutoffs </p></li>
<li><p><strong>cutoffs_count</strong> – pointer to be filled with the number of elements in the <code class="docutils literal notranslate"><span class="pre">cutoffs</span></code> array </p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The status code of this operation. If the status is not <code class="docutils literal notranslate"><span class="pre">FEATOMIC_SUCCESS</span></code>, you can use <code class="docutils literal notranslate"><span class="pre">featomic_last_error()</span></code> to get the full error message. </p>
</dd>
</dl>
</dd></dl>

<hr class="docutils" />
<dl class="c struct">
<dt class="sig sig-object c" id="c.featomic_calculation_options_t">
<span class="target" id="structfeatomic__calculation__options__t"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">featomic_calculation_options_t</span></span></span><a class="headerlink" href="#c.featomic_calculation_options_t" title="Link to this definition">¶</a><br /></dt>
<dd><p>Options that can be set to change how a calculator operates. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.featomic_calculation_options_t.gradients">
<span class="target" id="structfeatomic__calculation__options__t_1a83208ca97abf387f4b829bdc7b658501"></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">gradients</span></span></span><a class="headerlink" href="#c.featomic_calculation_options_t.gradients" title="Link to this definition">¶</a><br /></dt>
<dd><p><p>Array of NULL-terminated strings containing the gradients to compute.
If this field is <cite>NULL</cite> and <cite>gradients_count</cite> is 0, no gradients are
computed.</p>
<p>The following gradients are available:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;positions&quot;</span></code>, for gradients of the representation with respect to
atomic positions, with fixed cell matrix parameters. Positions
gradients are computed as</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[\frac{\partial \langle q \vert A_i \rangle}
     {\partial \mathbf{r_j}}\]</div>
</div>
<p>where <span class="math notranslate nohighlight">\(\langle q \vert A_i \rangle\)</span> is the representation around
atom <span class="math notranslate nohighlight">\(i\)</span> and <span class="math notranslate nohighlight">\(\mathbf{r_j}\)</span> is the position vector of the
atom <span class="math notranslate nohighlight">\(j\)</span>.</p>
<p><strong>Note</strong>: Position gradients of an atom are computed with respect to all
other atoms within the representation. To recover the force one has to
accumulate all pairs associated with atom <span class="math notranslate nohighlight">\(i\)</span>.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;strain&quot;</span></code>, for gradients of the representation with respect to
strain. These gradients are typically used to compute the virial, and
from there the pressure acting on a system. To compute them, we
pretend that all the positions <span class="math notranslate nohighlight">\(\mathbf r\)</span> and unit cell
<span class="math notranslate nohighlight">\(\mathbf H\)</span> have been scaled by a strain matrix
<span class="math notranslate nohighlight">\(\epsilon\)</span>:</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[\begin{split}\mathbf r &amp;\rightarrow \mathbf r \left(\mathbb{1} + \epsilon \right)\\
\mathbf H &amp;\rightarrow \mathbf H \left(\mathbb{1} + \epsilon \right)\end{split}\]</div>
</div>
<p>and then take the gradients of the representation with respect to this
matrix:</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[\frac{\partial \langle q \vert A_i \rangle} {\partial \mathbf{\epsilon}}\]</div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;cell&quot;</span></code>, for gradients of the representation with respect to the
system’s cell parameters. These gradients are computed at fixed
positions, and often not what you want when computing gradients
explicitly (they are mainly used in <code class="docutils literal notranslate"><span class="pre">featomic.torch</span></code> to integrate
with backward propagation). If you are trying to compute the virial
or the stress, you should use <code class="docutils literal notranslate"><span class="pre">&quot;strain&quot;</span></code> gradients instead.</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[\left. \frac{\partial \langle q \vert A_i \rangle}
     {\partial \mathbf{H}} \right |_\mathbf{r}\]</div>
</div>
</li>
</ul>
</p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.featomic_calculation_options_t.gradients_count">
<span class="target" id="structfeatomic__calculation__options__t_1a5a1244037e898baf478de3db4d657e04"></span><span class="n"><span class="pre">uintptr_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">gradients_count</span></span></span><a class="headerlink" href="#c.featomic_calculation_options_t.gradients_count" title="Link to this definition">¶</a><br /></dt>
<dd><p>Size of the <code class="docutils literal notranslate"><span class="pre">gradients</span></code> array </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.featomic_calculation_options_t.use_native_system">
<span class="target" id="structfeatomic__calculation__options__t_1a81d4f49cfa2688a77efd007799ea48ea"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">use_native_system</span></span></span><a class="headerlink" href="#c.featomic_calculation_options_t.use_native_system" title="Link to this definition">¶</a><br /></dt>
<dd><p>Copy the data from systems into native <code class="docutils literal notranslate"><span class="pre">SimpleSystem</span></code>. This can be faster than having to cross the FFI boundary too often. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.featomic_calculation_options_t.selected_samples">
<span class="target" id="structfeatomic__calculation__options__t_1afe10be05dee4d78b46d8c3addd42d8c3"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.featomic_labels_selection_t" title="featomic_labels_selection_t"><span class="n"><span class="pre">featomic_labels_selection_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">selected_samples</span></span></span><a class="headerlink" href="#c.featomic_calculation_options_t.selected_samples" title="Link to this definition">¶</a><br /></dt>
<dd><p>Selection of samples on which to run the computation </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.featomic_calculation_options_t.selected_properties">
<span class="target" id="structfeatomic__calculation__options__t_1a8af8910146ceb13076c72dbc2395e1d8"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.featomic_labels_selection_t" title="featomic_labels_selection_t"><span class="n"><span class="pre">featomic_labels_selection_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">selected_properties</span></span></span><a class="headerlink" href="#c.featomic_calculation_options_t.selected_properties" title="Link to this definition">¶</a><br /></dt>
<dd><p>Selection of properties to compute for the samples </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.featomic_calculation_options_t.selected_keys">
<span class="target" id="structfeatomic__calculation__options__t_1a47c4a2239eaa4ee056df09928388fe8a"></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference external" href="https://docs.metatensor.org/latest/core/reference/c/labels.html#c.mts_labels_t" title="(in metatensor)"><span class="n"><span class="pre">mts_labels_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">selected_keys</span></span></span><a class="headerlink" href="#c.featomic_calculation_options_t.selected_keys" title="Link to this definition">¶</a><br /></dt>
<dd><p>Selection for the keys to include in the output. Set this parameter to <code class="docutils literal notranslate"><span class="pre">NULL</span></code> to use the default set of keys, as determined by the calculator. Note that this default set of keys can depend on which systems we are running the calculation on. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.featomic_labels_selection_t">
<span class="target" id="structfeatomic__labels__selection__t"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">featomic_labels_selection_t</span></span></span><a class="headerlink" href="#c.featomic_labels_selection_t" title="Link to this definition">¶</a><br /></dt>
<dd><p>Rules to select labels (either samples or properties) on which the user wants to run a calculation</p>
<p>To run the calculation for all possible labels, users should set both fields to NULL. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.featomic_labels_selection_t.subset">
<span class="target" id="structfeatomic__labels__selection__t_1a199cd5a41bf221dc138bf1bdb0f97928"></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference external" href="https://docs.metatensor.org/latest/core/reference/c/labels.html#c.mts_labels_t" title="(in metatensor)"><span class="n"><span class="pre">mts_labels_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">subset</span></span></span><a class="headerlink" href="#c.featomic_labels_selection_t.subset" title="Link to this definition">¶</a><br /></dt>
<dd><p>Select a subset of labels, using the same selection criterion for all keys in the final <code class="docutils literal notranslate"><span class="pre">mts_tensormap_t</span></code>.</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">mts_labels_t</span></code> instance contains the same variables as the full set of labels, then only entries from the full set that also appear in this selection will be used.</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">mts_labels_t</span></code> instance contains a subset of the variables of the full set of labels, then only entries from the full set which match one of the entry in this selection for all of the selection variable will be used. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.featomic_labels_selection_t.predefined">
<span class="target" id="structfeatomic__labels__selection__t_1a43b9a2f43aee8a987eb24fcbcebd065f"></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference external" href="https://docs.metatensor.org/latest/core/reference/c/tensor.html#c.mts_tensormap_t" title="(in metatensor)"><span class="n"><span class="pre">mts_tensormap_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">predefined</span></span></span><a class="headerlink" href="#c.featomic_labels_selection_t.predefined" title="Link to this definition">¶</a><br /></dt>
<dd><p>Use a predefined subset of labels, with different entries for different keys of the final <code class="docutils literal notranslate"><span class="pre">mts_tensormap_t</span></code>.</p>
<p>For each key, the corresponding labels are fetched out of the <code class="docutils literal notranslate"><span class="pre">mts_tensormap_t</span></code> instance, which must have the same set of keys as the full calculation. </p>
</dd></dl>

</div>
</dd></dl>

</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="misc.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Miscellaneous</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="systems.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Defining systems</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, Guillaume Fraux, Philip Loche, Sergei Kliavinek, Kevin Kazuki Huguenin-Dumittan, Davide Tisi, Alexander Goscinski
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link fa-brands fa-github fa-2x" href="https://github.com/metatensor/featomic" aria-label="GitHub"></a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer no-toc">
      
      
      
    </aside>
  </div>
</div><script src="../../../_static/documentation_options.js?v=aaa0c780"></script>
    <script src="../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/scripts/furo.js?v=5fa4622c"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    </body>
</html>